<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Thermal Battery Assembly Guidance</title>

<!-- fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet">

<style>
  /* ========== 0. Base ================================================= */
  :root{
    --primary:#3A5BAA;--on-primary:#FFF;
    --error:#B3261E;
    --surface:#F8F9FD;--surface-container:#FFF;
    --on-surface:#1A1C1E;--on-surface-variant:#44474F;
    --outline:#DDE2EB;
    --elev-2:0 2px 6px 2px rgba(0,0,0,.06);
    --ripple-color-light:rgba(255,255,255,.2);
  }
  *,*:before,*:after{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family:'Plus Jakarta Sans',sans-serif;
    background:var(--surface);color:var(--on-surface);
    display:flex;flex-direction:column;
  }

  /* ========== 1. App-bar ============================================= */
  .appbar{
    display:flex;align-items:center;gap:1rem;
    padding:1rem 1.5rem;background:var(--primary);color:var(--on-primary);
    flex-shrink:0;box-shadow:0 2px 4px rgba(0,0,0,.1);
  }
  .appbar img{height:32px}
  .appbar h1{font-size:1.25rem;font-weight:500}

  /* ========== 2. Layout & card ======================================= */
  .content{flex-grow:1;display:flex;align-items:center;justify-content:center;padding:1.5rem}
  .stage{position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center}

  #pane{
    position:relative;z-index:2;width:100%;max-width:500px;min-height:480px;
    background:var(--surface-container);border-radius:16px;padding:2rem;
    box-shadow:var(--elev-2);
    display:flex;flex-direction:column;justify-content:center;text-align:center;
  }
  .ghost{display:none}

  /* content */
  #compName{font-weight:800;font-size:2.25rem;line-height:1.2;margin-bottom:.25rem}
  #stepLabel{font-size:1.25rem;color:var(--on-surface-variant);margin-bottom:1.5rem}
  #stepImg{max-width:100%;max-height:260px;object-fit:contain;margin:0 auto 1.5rem;border-radius:12px}
  #status{font-size:1.25rem;font-weight:600;color:var(--on-surface-variant);margin-top:1.5rem}
  p.meta{font-size:1rem;font-weight:500;color:var(--on-surface-variant)}

  /* buttons */
  #controls{display:none;gap:1rem;width:100%}
  .btn{
    flex-grow:1;display:inline-flex;align-items:center;justify-content:center;
    padding:1rem;border:2px solid transparent;border-radius:100px;
    font-size:1.125rem;font-weight:700;cursor:pointer;position:relative;overflow:hidden;transition:.2s;
  }
  .btn-primary{background:var(--primary);color:var(--on-primary)}
  .btn-secondary{background:transparent;color:var(--error);border-color:var(--error)}

  /* responsive two-column */
  @media(min-width:700px){
    #pane{
      max-width:960px;display:grid;gap:.25rem 2.5rem;
      grid-template-columns:4fr 5fr;
      grid-template-rows:auto auto auto 1fr auto;
      grid-template-areas:
        "image meta"
        "image name"
        "image label"
        "image controls"
        "image status";
      text-align:left;padding:2.5rem;
    }
    #stepImg{grid-area:image;max-height:400px;margin:0}
    p.meta{grid-area:meta;align-self:end}
    #compName{grid-area:name}
    #stepLabel{grid-area:label;margin-bottom:0}
    #controls{grid-area:controls;align-self:end}
    #status{grid-area:status;align-self:end;margin-top:0}
  }

  /* ripple */
  .ripple{position:absolute;border-radius:50%;transform:scale(0);animation:ripple .6s linear}
  @keyframes ripple{to{transform:scale(4);opacity:0}}
</style>
</head>

<body>

<header class="appbar">
  <img src="/static/res_logo_transparent.png" alt="logo">
  <h1>Thermal Battery Assembly Guidance</h1>
</header>

<main class="content">
  <section class="stage">
    <div id="prevCard" class="ghost" style="visibility:hidden"></div>
    <div id="nextCard" class="ghost" style="visibility:hidden"></div>

    <section id="pane">
      <p class="meta">Loading queueâ€¦</p>
      <div id="compName" style="display:none"></div>
      <div id="stepLabel"></div>
      <img id="stepImg" alt="" hidden>
      <div id="controls">
        <button id="nextBtn" class="btn btn-primary">Next&nbsp;Step</button>
        <button id="stopBtn" class="btn btn-secondary">Force&nbsp;Stop</button>
      </div>
      <p id="status"></p>
    </section>
  </section>
</main>

<!-- Ripple helper -->
<script>
  function addRipple(btn){
    btn.addEventListener('click',e=>{
      const r=document.createElement('span');btn.appendChild(r);
      const d=Math.max(btn.clientWidth,btn.clientHeight);
      r.style.width=r.style.height=d+'px';
      const rect=btn.getBoundingClientRect();
      r.style.left=e.clientX-rect.left-d/2+'px';
      r.style.top =e.clientY-rect.top -d/2+'px';
      r.classList.add('ripple');
      r.style.background='var(--ripple-color-light)';
      setTimeout(()=>r.remove(),600);
    });
  }
  document.querySelectorAll('.btn').forEach(addRipple);
</script>

<!-- main kiosk logic -->
<script src="/static/script.js?v={{ config.BUILD }}"></script>
</body>
</html>
